---
title: "Exploratory Report on Juvenile Snowshoe Hares in Bonanza Creek Experimental Forest"
subtitle: "Assignment 4"
author: "Catherine Takata"
date: "11/17/2020"
output: html_document
---


## Introduction 
A 4 - 5 sentence "mini-introduction" to what this study is exploring, including basic background information about the subject, site and study (with citations as needed), and a brief overview of what is included in the exploratory report. You should probably do this last.


```{r setup, include=FALSE, echo=TRUE, message=FALSE, warning=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(here)
library(lubridate)
library(effsize)
library(broom)
library(kableExtra)
```


#### Read in data 

```{r}
bonanza_hares <- read.csv(here("data", "bonanza_hares.csv")) 
```

```{r}
# in a pipe sequence, change the initial date into a different format and use mutate() function to add this new "formatted" column to the data set
# then mutate() a new column for specifically for year, in order to easily filter data 
hares_by_year <- bonanza_hares %>% 
  mutate(date_new = mdy(date)) %>% 
  mutate(year = year(date_new))
```


## Exploratory Findings 

```{r}
hare_counts <- hares_by_year %>% 
  count(age,year) %>% 
  filter(age == "j")

ggplot(data = hare_counts, aes(x = year, y = n)) + 
  geom_col(alpha = 0.5) +
  labs(title = "Number of Bonanza Hares per Year",
       subtitle = "Bonanza Creek (Takata, 2020)",
       x = "Year",
       y = "Number of Hares")
```

## Visualize juvenile hare weights
```{r}
ggplot(data = bonanza_hares, aes(x = weight)) + 
  geom_histogram(aes(fill = sex)) +
  facet_wrap(~grid) + 
  labs(title = "Number of Juvenile Hares by Sex Per Site by Weight",
       subtitle = "Bonanza Creek (Takata 2020)",
       x = "Weight (g)",
       y = "Number of Hares")
```

## Table of Descriptive Statistics

```{r}
jhares_by_sex <- bonanza_hares %>% 
  group_by(sex) %>% 
  filter(age == "j") %>% 
  summarize(mean = mean(weight, na.rm=TRUE),
            sd = sd(weight, na.rm=TRUE),
            sample = n())

kbl(jhares_by_sex) %>% 
  kable_styling() 
```


```{r}
juvenile_hares <- bonanza_hares %>% 
  filter(age == "j")

histogram 

qqplot

```


## 2 Sample T-test 
```{r}
# Create vectors of for female and male hares based on weight. 

weight_f <- bonanza_hares %>% 
  filter(sex == "f") %>% 
  pull(weight)

weight_m <- bonanza_hares %>% 
  filter(sex == "m") %>% 
  pull(weight)

# Inital 2 sample t test 
hare_weight_ttest <- t.test(weight_f, weight_m)
hare_weight_ttest
```


## Effect Size - Cohen's d
```{r}
cohen.d(weight_f, weight_m)
```

## Relationship between juvenile weight & hind foot length

```{r}
ggplot(data = juvenile_hares, aes(x = hindft, y = weight)) +
  geom_point() + 
  labs(title = "Juvenile Hares Hindfoot Length as a Function of Weight",
       subtitle = "Bonanza Creek (Takata 2020)",
       x = "Hind Foot Length (mm)",
       y = "Weight (g)")
```

## Linear Regression
```{r}
# Linear model, stored as hare_lm:
hare_lm <- lm(weight ~ hindft, data = juvenile_hares)

#return the overview: 
summary(hare_lm)
```


## Access model outputs
We can use the broom::tidy() function to get the model outputs in nice data frame format:
```{r}

```

